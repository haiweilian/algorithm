[「硬核 JS」数字之美](https://juejin.cn/post/6897949585558208525)
[二进制和十进制之间的互相转换](https://zhuanlan.zhihu.com/p/75291280)
[进制转换 - 在线工具](https://tool.oschina.net/hexconvert)

## 整数转二进制

十进制整数转二进制的秘诀 **除 2 取余，逆序排列**。

例如将 `42` 转为二进制；用上次的商除以 `2`，一直到商为小于 `1` 时为止。

```js
42 % 2 // 商 21 余 0
21 % 2 // 商 10 余 1
10 % 2 // 商 5 余 0
5 % 2 // 商 2 余 1
2 % 2 // 商 1 余 0
1 % 2 // 商 0 余 1
```

余数的结果为 `010101`，**取余逆序** 的结果就是 `101010`。如果想要 `8` 位二进在前面补 `0` 即 `00101010`。

## 小数转二进制

十进制小数转二进制的秘诀 **乘 2 取整，顺序排列**。

例如将 `0.125` 转换为二进制；将积的整数部分取出，再用余下的小数部分乘以 `2` ，一直到积的整数部分为`1` 或者 小数部分为 `0`。

```js
0.125 * 2 // 积 0.25 整数 0
0.25 * 2 // 积 0.5 整数 0
0.5 * 2 // 积 1.0 整数 1
```

整数部分按照 **顺序排列** 的结果就是 `0.001`。

## 整数加小数转二进制

先把整数部分转换成二进制，再把小数部分转换成二进制，最后加起来。

1. 已经得出 `42` 的二进制为 `101010`。
2. 已经得出 `0.125` 的二进制为 `0.001`。
3. 加起来就是 `101010.001`。

## 二进制转十进制

二进制转为十进制，整数部分从右到左用二进制的每个数去乘以 2 的相应次方(从 0 开始)，小数点后则是从左往右用二进制的每个数去乘以 2 的相应负次方(从 1 开始)。

因为计算机内部表示数的字节单位是定长的。如 8 位、16 位、32 位。所以位数不够时，高位补零。

举例 `101010.001` 高位补零 `00101010.001`。

整数部分**从右到左**：列如 2 的 3 次方`(2 * 2 * 2)`

(0 \* 2 的 0 次方) + (1 \* 2 的 1 次方) + (0 \* 2 的 2 次方) + (1 \* 2 的 3 次方) + (0 \* 2 的 4 次方) + (1 \*2 的 5 次方) + (0 \* 2 的 6 次方) + (0 \* 2 的 7 次方) = `0 + 2 + 0 + 8 + 0 + 32 + 0 + 0 = 42`。

小数部分**从左往右**：列如 2 的 3 负次方`1 / (2 * 2 * 2)`

(0 \* 2 的 1 负次方) + (0 \* 2 的 2 负次方) + (1 \* 2 的 3 负次方) = `0 + 0 + 0.125 = 0.125`。

## 0.1 + 0.2 != 0.3

本质是二进制模拟十进制进行计算时的精度问题。

先把 `0.1` 转换成二进制，结果为 `0.000110011001...` 无限循环。

```js
0.1 * 2 = 0.2 	// 取整数 0
0.2 * 2 = 0.4 	// 取整数 0
0.4 * 2 = 0.8 	// 取整数 0
0.8 * 2 = 1.6 	// 取整数 1

0.6 * 2 = 1.2 	// 取整数 1 -> 到此我们看到开始无限循环了
0.2 * 2 = 0.4 	// 取整数 0
0.4 * 2 = 0.8 	// 取整数 0
0.8 * 2 = 1.6 	// 取整数 1

0.6 * 2 = 1.2 	// 取整数 1 -> 到此我们看到开始无限循环了
0.2 * 2 = 0.4 	// 取整数 0
0.4 * 2 = 0.8 	// 取整数 0
0.8 * 2 = 1.6 	// 取整数 1
...
```

再把 `0.2` 转换成二进制。结果为 `0.000110011001...` 无限循环`。

```js
0.2 * 2 = 0.4 // 取整数 0
0.4 * 2 = 0.8 // 取整数 0
0.8 * 2 = 1.6 // 取整数 1

0.6 * 2 = 1.2 // 取整数 1 -> 到此我们看到开始无限循环了
0.2 * 2 = 0.4 // 取整数 0
0.4 * 2 = 0.8 // 取整数 0
0.8 * 2 = 1.6 // 取整数 1

0.6 * 2 = 1.2 // 取整数 1 -> 到此我们看到开始无限循环了
0.2 * 2 = 0.4 // 取整数 0
0.4 * 2 = 0.8 // 取整数 0
0.8 * 2 = 1.6 // 取整数 1
```
